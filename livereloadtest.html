<!DOCTYPE html>
<html lang="en">

<head>
    <title>Livereload test page</title>
    <script type="text/javascript">
window.onload = function () {
    var conn;
    
    function appendLog(msg){
        var d = document.getElementById("log");
        d.innerHTML += '<br /><span>' + msg + '</span>';
    }
    
    function tryConnectToLivereload() {
        conn = new WebSocket("ws://localhost:13221/appixlivereload");
        conn.onclose = function (evt) {
            appendLog("Connection closed");
            setTimeout(tryConnectToLivereload, 2000);
        };
        conn.onmessage = function (evt) {
            console.log('WebSocket message received:', evt);
            appendLog("Refresh received!");
        };
    }

    if (window["WebSocket"]) {
        tryConnectToLivereload();
    } else {
        appendLog("Your browser does not support WebSockets.");
    }
};
</script>
</head>

<body>
    <div id="log"><span>Log:</span></div>
</body>

</html>